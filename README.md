# Filler Sites - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º —Å Playwright

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–∞–π—Ç–∞—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Playwright.

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
npm install
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
```bash
USER_ID=001                    # ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
AUTHORIZATION_NEEDED=false     # –¢—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
BROWSER_OPEN=false            # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É Chrome
CHROME_CDP_ENDPOINT=          # WebSocket endpoint –¥–ª—è CDP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

## üåê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –æ—Ç–∫—Ä—ã—Ç–æ–º—É Chrome –±—Ä–∞—É–∑–µ—Ä—É

### –ó–∞–ø—É—Å–∫ Chrome —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CDP (Chrome DevTools Protocol)

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–æ–º—É Chrome –±—Ä–∞—É–∑–µ—Ä—É –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —É–¥–∞–ª–µ–Ω–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏:

#### macOS/Linux:
```bash
# –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã Chrome
killall "Google Chrome"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Chrome —Å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º –ø–æ—Ä—Ç–æ–º
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome \
  --remote-debugging-port=9222 \
  --user-data-dir=/tmp/chrome-debug-profile \
  --disable-web-security \
  --disable-features=VizDisplayCompositor
```

#### Windows:
```cmd
# –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã Chrome
taskkill /f /im chrome.exe

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Chrome —Å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º –ø–æ—Ä—Ç–æ–º
"C:\Program Files\Google\Chrome\Application\chrome.exe" ^
  --remote-debugging-port=9222 ^
  --user-data-dir=C:\temp\chrome-debug-profile ^
  --disable-web-security ^
  --disable-features=VizDisplayCompositor
```

#### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ npm:
```bash
npm run chrome:debug
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ WebSocket endpoint –¥–ª—è CDP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Chrome —Å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º –ø–æ—Ä—Ç–æ–º, –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π endpoint:

#### 1. –ß–µ—Ä–µ–∑ HTTP API:
```bash
# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±—Ä–∞—É–∑–µ—Ä–µ
curl http://localhost:9222/json/version

# –û—Ç–≤–µ—Ç –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å webSocketDebuggerUrl:
{
  "Browser": "Chrome/138.0.7204.158",
  "webSocketDebuggerUrl": "ws://localhost:9222/devtools/browser/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"
}
```

#### 2. –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∫–ª–∞–¥–æ–∫:
```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –≤–∫–ª–∞–¥–∫–∏
curl http://localhost:9222/json/list

# –û—Ç–≤–µ—Ç –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ —Å –∏—Ö endpoints
```

#### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
–ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π endpoint –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏. –ü—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
```bash
BROWSER_OPEN=true
```

#### 4. –†—É—á–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ endpoint:
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π endpoint:
```bash
CHROME_CDP_ENDPOINT=ws://localhost:9222/devtools/browser/YOUR-BROWSER-ID
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Chrome

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–ø—É—â–µ–Ω –ª–∏ Chrome —Å CDP
curl http://localhost:9222/json/version

# –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤–µ—Ä–Ω—É–ª–∞ JSON - Chrome –¥–æ—Å—Ç—É–ø–µ–Ω
# –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - Chrome –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –∑–∞–ø—É—â–µ–Ω –±–µ–∑ --remote-debugging-port
```

### –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

#### Chrome –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 9222:
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Chrome –∑–∞–ø—É—â–µ–Ω —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `--remote-debugging-port=9222`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –∑–∞–Ω—è—Ç –ª–∏ –ø–æ—Ä—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º: `lsof -i :9222`
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, 9223) –∏ –æ–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### WebSocket –æ—à–∏–±–∫–∞ 404:
- Browser endpoint –∏–∑–º–µ–Ω–∏–ª—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ Chrome
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ endpoint (–Ω–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ `CHROME_CDP_ENDPOINT`)
- –ò–ª–∏ –ø–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π endpoint —á–µ—Ä–µ–∑ `curl http://localhost:9222/json/version`

#### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Chrome –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Chrome —Å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –° –Ω–æ–≤—ã–º –±—Ä–∞—É–∑–µ—Ä–æ–º
BROWSER_OPEN=false npm test

# –° –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –æ—Ç–∫—Ä—ã—Ç–æ–º—É Chrome
BROWSER_OPEN=true npm test

# –° –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º endpoint
CHROME_CDP_ENDPOINT=ws://localhost:9222/devtools/browser/YOUR-ID npm test
```

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ .env

#### –ù–æ–≤—ã–π –±—Ä–∞—É–∑–µ—Ä:
```bash
USER_ID=001
AUTHORIZATION_NEEDED=false
BROWSER_OPEN=false
```

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –æ—Ç–∫—Ä—ã—Ç–æ–º—É Chrome:
```bash
USER_ID=001
AUTHORIZATION_NEEDED=false
BROWSER_OPEN=true
```

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É endpoint:
```bash
USER_ID=001
AUTHORIZATION_NEEDED=false
BROWSER_OPEN=true
CHROME_CDP_ENDPOINT=ws://localhost:9222/devtools/browser/12345678-1234-1234-1234-123456789abc
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
filler-sites/
‚îú‚îÄ‚îÄ .env                      # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ browserConnect.ts     # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±—Ä–∞—É–∑–µ—Ä—É
‚îÇ   ‚îî‚îÄ‚îÄ envConfig.ts         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ tests/                   # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ pages/                   # Page Object –∫–ª–∞—Å—Å—ã
‚îî‚îÄ‚îÄ files/                   # –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

## üîç –û—Ç–ª–∞–¥–∫–∞

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±—Ä–∞—É–∑–µ—Ä—É:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Chrome
curl -s http://localhost:9222/json/version | jq

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
curl -s http://localhost:9222/json/list | jq

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
DEBUG=pw:api npm test
```
